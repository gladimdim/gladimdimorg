## üá∫üá¶–î–∏–∑–∞–π–Ω —Ç–∞ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—è –º–µ—Ö–∞–Ω—ñ–∑–º—É –ø–æ–¥—ñ–π –≤ –ø–æ–∫—Ä–æ–∫–æ–≤—ñ–π –≥—Ä—ñ "–°–ª–æ–±–æ–¥–∞"

*–ó–∞—Ö–æ—Ç—ñ–ª–æ—Å—è —Ä–æ–∑–±–∞–≤–∏—Ç–∏ —Å—Ç–∞—Ç—Ç—ñ –ø—Ä–æ Flutter&Dart —á–∏–º–æ—Å—å –ø—Ä–∏–∫–ª–∞–¥–Ω–∏–º, –∞ –Ω–µ —á–µ—Ä–≥–æ–≤–∏–º –æ–ø–∏—Å–æ–º Todo/Counter/REST/CRUD —Ñ—ñ–≥–Ω–µ—é.*

–ü—ñ–¥ —á–∞—Å —Ä–æ–∑—Ä–æ–±–∫–∏ –ø–æ–∫—Ä–æ–∫–æ–≤–æ—ó  [–≥—Ä–∏ –≤ —Å—Ç–∏–ª—ñ "–ø–æ–±—É–¥—É–π —Å–µ–ª–∏—â–µ"](https://locadeserta.com/sloboda) —É –º–µ–Ω–µ –ø–æ—Å—Ç–∞–ª–∞ –Ω–µ–æ–±—Ö—ñ–¥–Ω—ñ—Å—Ç—å —É –≤–ø—Ä–æ–≤–∞–¥–∂–µ–Ω—ñ —Å—É—Ç–Ω–æ—Å—Ç—ñ –ø–æ–¥—ñ–π. –ó–∞ –∑–∞–¥—É–º–æ–º, –≤ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ –≤—ñ–¥ –ø–æ–∫–∞–∑–Ω–∏–∫—ñ–≤ –≤–∞—à–æ–≥–æ —Å–µ–ª–∏—â–∞ —Ç–∞ —á–∞—Å–æ–≤–æ–≥–æ –ø—Ä–æ–º—ñ–∂–∫—É, –≤ –≥—Ä—ñ –º–∞–ª–∏ –± –∑'—è–≤–ª—è—Ç–∏—Å—è —Ä—ñ–∑–Ω—ñ —è–≤–∏—â–∞/–ø–æ–¥—ñ–á. –ù–∞–ø—Ä–∏–∫–ª–∞–¥: –Ω–∞–ø–∞–¥ —Å–∞—Ä–∞–Ω–∏ –≤–µ—Å–Ω–æ—é, –ø—Ä–∏—ó–∑–¥ –∫—É–ø—Ü—ñ–≤, —è–∫—â–æ —É –≤–∞—Å –Ω–∞ —Å–∫–ª–∞–¥—ñ –¥–æ—Å—Ç–∞—Ç–Ω—å–æ –Ω–∞–∫–æ–ø–∏—á–µ–Ω–æ —Ç–æ–≤–∞—Ä—ñ–≤ –¥–ª—è –Ω–∏—Ö, –≤—ñ–π—Å—å–∫–æ–≤—ñ –¥—ñ—ó, —è–∫—â–æ —É –≤–∞—Å —î –¥–æ—Å—Ç–∞—Ç–Ω—å–æ –≤—ñ–π—Å—å–∫, –ø—Ä–æ—Ö–∞–Ω–Ω—è –¥–æ–ø–æ–º–æ–≥–∏ –≤—ñ–¥ —ñ–Ω—à–∏—Ö —Å–µ–ª–∏—â, —è–∫—â–æ –≤–∞—à–µ —Å–µ–ª–∏—â–µ –¥–æ–≤–æ–ª—ñ –≤—ñ–¥–æ–º–µ —ñ –º–∞—î –≤—ñ–π—Å—å–∫–æ–≤—É —Å–∏–ª—É. –©–æ–± —Ü–µ–π —Ä–æ–∑–≤–∏—Ç–æ–∫ –ø–æ–¥—ñ–π –Ω–µ –±—É–≤ –ª—ñ–Ω—ñ–π–Ω–∏–º, —è —Ç–∞–∫–æ–∂ –¥–æ–¥–∞–≤ –µ–ª–µ–º–µ–Ω—Ç –≤–∏–ø–∞–¥–∫–æ–≤–æ—Å—Ç—ñ –¥–æ –∫–æ–∂–Ω–æ—ó –ø–æ–¥—ñ—ó. –ù–∞–ø—Ä–∏–∫–ª–∞–¥, –∞—Ç–∞–∫–∞ —Å–∞—Ä–∞–Ω–∏ –º–∞—î 20% —à–∞–Ω—Å, –≤—ñ–¥–≤—ñ–¥–∞–Ω–Ω—è –∫—É–ø—Ü—è - 100%.

–î–æ–¥–∞—Ç–∫–æ–≤—ñ —Å–∫–ª–∞–¥–Ω—ñ—Å—Ç—å –≤–Ω–æ—Å–∏—Ç—å —Ç–∞–∫–æ–∂ —ñ–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å –≤ —Ü—ñ –ø–æ–¥—ñ—ó: –Ω–∞ –¥–µ—è–∫—ñ –ø–æ–¥—ñ—ó —è –º–æ–∂—É –ø–æ–≥–æ–¥–∏—Ç–∏—Å—è, –∞ –º–æ–∂—É —ñ –Ω—ñ. –ù–∞–ø—Ä–∏–∫–ª–∞–¥: –≤–∏—Å–ª–∞—Ç–∏ –¥–æ–ø–æ–º–æ–≥—É —Å—É—Å—ñ–¥–Ω—ñ–π —Å–ª–æ–±–æ–¥—ñ. –Ø –º–æ–∂—É —è–∫ –ø–æ—Å–ª–∞—Ç–∏ —Ç—É–¥–∏ –≤—ñ–π—Å—å–∫–æ–≤–∏–π –∑–∞–≥—ñ–Ω, —Ç–∞–∫ —ñ –ø—Ä–æ—ñ–≥–Ω–æ—Ä—É–≤–∞—Ç–∏. –ö–æ–∂–µ–Ω –≤–∏–±—ñ—Ä –º–∞—î –≤–ø–ª–∏–≤ –Ω–∞ –ø–æ–¥–∞–ª—å—à–∏–π —Ä–æ–∑–≤–∏—Ç–æ–∫ –ø–æ–¥—ñ–π —ñ –≤–ø–ª–∏–≤–∞—î –Ω–∞ –ø–æ–∫–∞–∑–Ω–∏–∫–∏ —Å–ª–æ–±–æ–¥–∏. –í–¥–∞–ª–∏–π –≤—ñ–π—Å—å–∫–æ–≤–∏–π –ø–æ—Ö—ñ–¥ –ø—Ä–∏–Ω–æ—Å–∏—Ç—å –ø—Ä–∏–±—É—Ç–æ–∫ —ñ —Å–ª–∞–≤—É. –ù–µ–≤–¥–∞–ª–∏–π - –≤—Ç—Ä–∞—Ç–∞ –≤—ñ–π—Å—å–∫ —ñ —Ä–µ—Å—É—Ä—Å—ñ–≤.

–ü—Ä–∏–∫–ª–∞–¥ —É–º–æ–≤–Ω–æ—ó –ø–æ–¥—ñ—ó:

![Screen Shot 2020-03-25 at 13.40.38.png](https://cdn.hashnode.com/res/hashnode/image/upload/v1585136961451/TxLaPGEwH.png)

–ê–ª–µ —î —â–µ –ø–æ–¥—ñ—ó, —è–∫—ñ –≤—ñ–¥–±—É–≤–∞—é—Ç—å—Å—è –±–µ–∑—É–º–æ–≤–Ω–æ (–ø—Ä–æ—Å—Ç—ñ –ø–æ–¥—ñ—ó). –ù–∞–ø—Ä–∏–∫–ª–∞–¥: –≤–∏ –Ω–µ –º–æ–∂–µ—Ç–µ –≤–∏–±—Ä–∞—Ç–∏, —á–∏ –Ω–∞–ø–∞–¥–µ –Ω–∞ –≤–∞—Å —Å–∞—Ä–∞–Ω–∞, —á–∏ –Ω—ñ. –ê–±–æ —á–∏ –ø—Ä–∏–π–¥—É—Ç—å –¥–æ –≤–∞—Å –≥–æ—Å—Ç—ñ, —á–∏ –Ω—ñ. 

![Screen Shot 2020-03-25 at 13.40.55.png](https://cdn.hashnode.com/res/hashnode/image/upload/v1585136934889/dfZEOPBPI.png)

–Ü —â–æ–± –¥–æ–¥–∞—Ç–∏ —â–µ –±—ñ–ª—å—à–æ—ó –Ω–µ–ø–µ—Ä–µ–¥–±–∞—á—É–≤–∞–Ω–Ω–æ—Å—Ç—ñ, –∫–æ–∂–Ω–∞ –∑ –ø–æ–¥—ñ–π –º–∞—î –¥–≤–∞ —Ä–æ–∑–≤–∏—Ç–∫–∏: —É—Å–ø—ñ—à–Ω–∏–π —ñ –ø—Ä–æ–≤–∞–ª—å–Ω–∏–π. –í–¥–∞–ª–∏–π –Ω–∞–ø–∞–¥ —Å–∞—Ä–∞–Ω–∏ –Ω–∞ –≤–∞—Å –∑–∞–±–µ—Ä–µ —Ä–µ—Å—É—Ä—Å–∏. –í —Ç–æ–π –∂–µ —á–∞—Å –≤–¥–∞–ª–∏–π –≤—ñ–π—Å—å–∫–æ–≤–∏–π –ø–æ—Ö—ñ–¥ –ø—Ä–∏–Ω–µ—Å–µ –≤–∞–º —ó—Ö. –£—Å–ø—ñ—Ö/–ø—Ä–æ–≤–∞–ª —è –≤–∏—Ä—ñ—à–∏–≤ —Ç–∞–∫–æ–∂ –∑—Ä–æ–±–∏—Ç–∏ –µ–ª–µ–º–µ–Ω—Ç–æ–º –≤–∏–ø–∞–¥–∫–æ–≤–æ—Å—Ç—ñ.

–ü—Ä–∏–∫–ª–∞–¥ —É—Å–ø—ñ—à–Ω–æ–≥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—É –ø–æ–¥—ñ—ó –∑ —Ç–æ—Ä–≥—ñ–≤–ª–µ—é:

![Screen Shot 2020-03-25 at 13.49.42.png](https://cdn.hashnode.com/res/hashnode/image/upload/v1585137014915/5iYv6ykU_.png)

## –¢–æ–±—Ç–æ, –º–æ–∂–Ω–∞ –ø—ñ–¥—Å—É–º—É–≤–∞—Ç–∏ –≤–∏–º–æ–≥–∏ –¥–æ –º–µ—Ö–∞–Ω—ñ–∑–º—É –ø–æ–¥—ñ–π:

1. –ü–æ–¥—ñ—è –º–æ–∂–µ –±—É—Ç–∏ –∑ –≤–∏–±–æ—Ä–æ–º –∞–±–æ –ø—Ä–æ—Å—Ç–∞.
2. –ü–æ–¥—ñ—è –º–∞—î —è–∫–∏–π—Å—å –≤–∏–ø–∞–¥–∫–æ–≤–∏–π —à–∞–Ω—Å –¥–æ –∞–∫—Ç–∏–≤–∞—Ü—ñ—ó.
3. –ê–∫—Ç–∏–≤—É–≤–∞—Ç–∏—Å—è –ø–æ–¥—ñ—è –º–æ–∂–µ –ª–∏—à–µ –ø—Ä–∏ –Ω–∞—è–≤–Ω–æ—Å—Ç—ñ —è–∫–∏—Ö–æ—Å—å —Ñ–∞–∫—Ç–æ—Ä—ñ–≤, –ø–æ–∫–∞–∑–Ω–∏–∫—ñ–≤ –°–ª–æ–±–æ–¥–∏, –ø–æ—Ä–∏ —Ä–æ–∫—É, —Ä—ñ–∫, —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º –ø–æ–ø–µ—Ä–µ–¥–Ω—ñ—Ö –ø–æ–¥—ñ–π.
4. –ö–æ–∂–Ω–∞ –ø–æ–¥—ñ—è (—É–º–æ–≤–Ω–∞ —ñ –ø—Ä–æ—Å—Ç–∞) –º–∞—î —à–∞–Ω—Å –Ω–∞ —É—Å–ø—ñ—Ö —ñ –Ω–∞ –ø—Ä–æ–≤–∞–ª.
5. –£–º–æ–≤–Ω–∞ –ø–æ–¥—ñ—è, —É —Ä–∞–∑—ñ —ó—ó –∞–∫—Ç–∏–≤–∞—Ü—ñ—ó –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–µ–º, –º–∞—î –≤–∏–ø–∞–¥–∫–æ–≤–∏–π —à–∞–Ω—Å –Ω–∞ —É—Å–ø—ñ—Ö —ñ –ø—Ä–æ–≤–∞–ª.
6. –ö–æ–∂–Ω–∞ –ø–æ–¥—ñ—è (—É–º–æ–≤–Ω–∞ —ñ –ø—Ä–æ—Å—Ç–∞), –≤–∏–∑–Ω–∞—á–∞—î –Ω–∞—Å–ª—ñ–¥–∫–∏ –¥–ª—è –≥—Ä–∞–≤—Ü—è (–∑–º–µ–Ω—à–µ–Ω–Ω—è/–∑–±—ñ–ª—å—à–µ–Ω–Ω—è —Ä–µ—Å—É—Ä—Å—ñ–≤).
7.  –ù–∞—Å–ª—ñ–¥–∫–∏ –≤—ñ–¥ –ø–æ–¥—ñ–π –º–æ–∂—É—Ç—å –Ω–∞—Å—Ç—É–ø–∏—Ç–∏ –∞–±–æ –æ–¥—Ä–∞–∑—É –≤ —Ü–µ–π –∂–µ —Ö—ñ–¥ –≥—Ä–∏, –∞–±–æ –Ω–∞ –Ω–∞—Å—Ç—É–ø–Ω–∏–π.
8. –ü–æ–¥—ñ—è –º–∞—î —ñ–Ω—Ñ–æ—Ä–º—É–≤–∞—Ç–∏ –≥—Ä–∞–≤—Ü—è (—É —Ç–µ–∫—Å—Ç–æ–≤–æ–º—É –≤–∏–≥–ª—è–¥—ñ) –ø—Ä–æ —É—Å–ø—ñ—Ö, –Ω–µ–≤–¥–∞—á—É, –Ω–∞—Å—Ç–∞–Ω–Ω—è –ø–æ–¥—ñ—ó, –∑–∞–∫—ñ–Ω—á–µ–Ω–Ω—è –ø–æ–¥—ñ—ó. –í—Å—ñ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –º–∞—é—Ç—å –±—É—Ç–∏ –ª–æ–∫–∞–ª—ñ–∑–æ–≤–∞–Ω–∏–º–∏.

# –†–µ–∞–ª—ñ–∑–∞—Ü—ñ—è

–ü–æ–∫–∏ —â–æ, —É –Ω–∞—Å —ñ—Å–Ω—É—î –¥–≤–∞ —Ç–∏–ø–∏ –ø–æ–¥—ñ–π: RandomTurnEvent —Ç–∞ ChoicableRandomTurnEvent. –ü–µ—Ä—à–∏–π –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î –∑–∞ –ø—Ä–æ—Å—Ç—ñ –ø–æ–¥—ñ—ó, –¥—Ä—É–≥–∏–π - –¥–∞—î –∑–º–æ–≥—É –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–µ–≤—ñ –º–æ–∂–ª–∏–≤—ñ—Å—Ç—å –∞–∫—Ç–∏–≤—ñ–∑—É–≤–∞—Ç–∏ —Å–µ–±–µ.

–°–ø–æ—á–∞—Ç–∫—É —ñ–º–ø–ª–µ–º–µ–Ω—Ç—É—î–º–æ –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω–∏–π –∫–ª–∞—Å—Å RandomTurnEvent, —è–∫–∏–π –±–∏ –ø–æ–≤–Ω—ñ—Å—Ç—é –ø–æ–∫—Ä–∏–≤–∞–≤ –ø–æ—Ç—Ä–µ–±–∏ –ø—Ä–æ—Å—Ç–∏—Ö –ø–æ–¥—ñ—ó:

```dart
abstract class RandomTurnEvent {
  // –∫–ª—é—á –¥–ª—è –ª–æ–∫–∞–∑—ñ–∑–æ–≤–∞–Ω–Ω–æ—ó –Ω–∞–∑–≤–∏ –ø–æ–¥—ñ—ó
  String localizedKey;
  // —Å–ø–∏—Å–æ–∫ —Ñ—É–Ω–∫—Ü—ñ–π, —è–∫—ñ –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å –º–æ–∂–ª–∏–≤—ñ—Å—Ç—å –∞–∫—Ç–∏–≤–∞—Ü—ñ—ó –ø–æ–¥—ñ—ó.
  List<Function> conditions;
  // –≤–ø–ª–∏–≤ –Ω–∞ —Ä–µ—Å—É—Ä—Å–∏ —Å–ª–æ–±–æ–¥–∏ —É –≤–∏–ø–∞–¥–∫—É —É—Å–ø—ñ—Ö—É
  Stock stockSuccess;
  // –≤–ø–ª–∏–≤ –Ω–∞ —Ä–µ—Å—É—Ä—Å–∏ —Å–ª–æ–±–æ–¥–∏ —É –≤–∏–ø–∞–¥–∫—É –ø—Ä–æ–≤–∞–ª—É
  Stock stockFailure;
  // –∫–∞—Ä—Ç–∏–Ω–∫–∞, —è–∫—â–æ –ø–æ–¥—ñ—è —É—Å–ø—ñ—à–Ω–∞
  String successIconPath = "images/events/success_event.png";
  // –∫–∞—Ä—Ç–∏–Ω–∫–∞, —è–∫—â–æ –ø–æ–¥—ñ—è –ø—Ä–æ–≤–∞–ª—å–Ω–∞
  String failureIconPath = "images/events/failed_event.png";

  // –≤–ø–ª–∏–≤ –Ω–∞ –ø–æ–∫–∞–∑–Ω–∏–∫–∏ —Å–µ–ª–∏—â–∞
  CityProps cityPropsSuccess;
  CityProps cityPropsFailure;
  
  // –∫–ª—é—á—ñ –¥–æ –ª–æ–∫–∞–ª—ñ–∑–æ–≤–∞–Ω–∏—Ö –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å
  String successMessageKey;
  String failureMessageKey;

  // –≤—ñ—Ä–æ–≥—ñ–¥–Ω—ñ—Å—Ç—å –∞–∫—Ç–∏–≤–∞—Ü—ñ—ó –ø–æ–¥—ñ—ó. –í—ñ–¥ 0 –¥–æ 100.
  int probability = 0;
  // –≤—ñ—Ä–æ–≥—ñ–¥–Ω—ñ—Å—Ç—å —É—Å–ø—ñ—Ö—É –ø–æ–¥—ñ—ó. –í—ñ–¥ 0 –¥–æ 100.
  int successRate = 0;
```

–¢–µ–ø–µ—Ä –∑–∞—ñ–º–ø–ª–µ–º–µ–Ω—Ç—É—î–º–æ –¥–µ–∫—ñ–ª—å–∫–∞ –º–µ—Ç–æ–¥—ñ–≤.

- –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è —É–º–æ–≤ –¥–ª—è –ø–æ–¥—ñ—ó:
```dart
  bool satisfiesConditions(Sloboda city) {
    for (var func in conditions) {
      if (!func(city)) {
        return false;
      }
    }
    return true;
  }
```
- –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –≤–∏–ø–∞–¥–∫–æ–≤–æ—Å—Ç—ñ —Ç–∞ –≤–∏–∫–æ–Ω–∞–Ω–Ω—é –ø–æ–¥—ñ–π. –¢–æ–±—Ç–æ, —á–∏ –±—É–¥–µ –∞–∫—Ç–∏–≤–æ–≤–∞–Ω–∞ –ø–æ–¥—ñ—è —á–∏ –Ω—ñ.
```dart
  bool canHappen(Sloboda city) {
    bool canHappen =
        Random().nextInt(100) < probability && satisfiesConditions(city);
    debugPrint(
        'Event: $localizedKey satisfies: ${satisfiesConditions(city)}, will happen: $canHappen');
    return canHappen;
  }
```
- –í–∏–∫–æ–Ω–∞–Ω–Ω—è –ø–æ–¥—ñ—ó —É —Ä–∞–∑—ñ —ó—ó –∞–∫—Ç–∏–≤–∞—Ü—ñ—ó

```dart
  Function execute(Sloboda city) {
    var r = Random().nextInt(100);
    return () {
      bool success = r <= successRate;
      return EventMessage(
          event: this,
          stock: success ? stockSuccess : stockFailure,
          cityProps: success ? cityPropsSuccess : cityPropsFailure,
          imagePath: success ? successIconPath : failureIconPath,
          messageKey:
              success ? this.successMessageKey : this.failureMessageKey);
    };
  }
```

–§—É–Ω–∫—Ü—ñ—è execute –ø–æ–≤–µ—Ä—Ç–∞—î —ñ–Ω—à—É —Ñ—É–Ω–∫—Ü—ñ—é. –ü—Ä–æ —Ü–µ –±—É–¥–µ –æ–ø–∏—Å–∞–Ω–æ –Ω–∏–∂—á–µ.

–ó–∞ –¥–æ–ø–æ–º–æ–≥–æ—é –≤—Å—å–æ–≥–æ  —Ç—Ä—å–æ—Ö –º–µ—Ç–æ–¥—ñ–≤ —ñ –∑ –¥–µ—Å—è—Ç–∫–∞ –≤–ª–∞—Å—Ç–∏–≤–æ—Å—Ç–µ–π –∫–ª–∞—Å—É, –º–∏ –º–æ–∂–µ–º–æ –ø–æ–≤–Ω—ñ—Å—Ç—é –æ–ø–∏—Å–∞—Ç–∏ –≤–∏–ø–∞–¥–∫–æ–≤—É –ø—Ä–æ—Å—Ç—É –ø–æ–¥—ñ—é.

–î–ª—è –ø—Ä–∏–∫–ª–∞–¥—É –≤—ñ–∑—å–º–µ–º–æ –Ω–∞–ø–∞–¥ —Å–∞—Ä–∞–Ω–∏:

```dart
class SaranaInvasion extends RandomTurnEvent {
  String localizedKey = 'randomTurnEvent.saranaInvasion';
  String successMessageKey = 'randomTurnEvent.successSaranaInvasion';
  String failureMessageKey = 'randomTurnEvent.failureSaranaInvasion';
  int probability = 50;
  int successRate = 40;

  Stock stockSuccess = Stock(
    values: {
      RESOURCE_TYPES.FOOD: -50,
      RESOURCE_TYPES.HORSE: -10,
    },
  );

  Stock stockFailure = Stock();

  List<Function> conditions = [
    (Sloboda city) {
      return city.currentSeason is SpringSeason;
    },
  ];
}

```

–Ü–∑ —É–º–æ–≤ –Ω–∞—Å—Ç–∞–Ω–Ω—è —Ü—ñ—î—ó –ø–æ–¥—ñ—ó —É –Ω–∞—Å –ª–∏—à–µ: –≤–µ—Å–Ω–∞. –Ü –∑ –≤—ñ—Ä–æ–≥—ñ–¥–Ω—ñ—Å—Ç—é 50% —Å–∞—Ä–∞–Ω–∞ –Ω–∞–ø–∞–¥–µ –Ω–∞ —Å–µ–ª–∏—â–µ, —ñ –∑ –≤—ñ—Ä–æ–≥—ñ–¥–Ω—ñ—Å—Ç—é 40% –≤–æ–Ω–∞ –≤—Å–µ-—Ç–∞–∫–∏ –Ω–∞—Å–µ—Å–µ —à–∫–æ–¥—É (–±—É–¥–µ —É—Å–ø—ñ—à–Ω–∞). –î–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –Ω–æ–≤–∏—Ö –ø–æ–¥—ñ–π —Ç—Ä–µ–±–∞ –ª–∏—à–µ –æ–ø–∏—Å–∞—Ç–∏ –æ—Å–Ω–æ–≤–Ω—ñ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏ RandomTurnEvent –∫–ª–∞—Å—É —ñ –Ω–µ —Ç—Ä–µ–±–∞ –Ω–∞–≤—ñ—Ç—å –¥–æ–¥–∞–≤–∞—Ç–∏ —è–∫—É—Å—å –ª–æ–≥—ñ–∫—É, —è–∫—â–æ –≤–ª–∞—à—Ç–æ–≤—É—î —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞.

–ë—ñ–ª—å—à —Å–∫–ª–∞–¥–Ω–∏–π –ø—Ä–∏–∫–ª–∞–¥ –Ω–∞—Å—Ç–∞–Ω–Ω—è –ø–æ–¥—ñ—ó –¥–ª—è –ø—Ä–∏—Ö–æ–¥—É –¥–æ –≤–∞—Å –ø–µ—Ä–µ—Å–µ–ª–µ–Ω—Ü—ñ–≤ –∑ —ñ–Ω—à–∏—Ö —Å–µ–ª–∏—â:

```dart
List<Function> conditions = [
    (Sloboda city) {
      return city.currentSeason is AutumnSeason;
    },
    (Sloboda city) {
      return city.props.getByType(CITY_PROPERTIES.GLORY) > 20;
    },
    (Sloboda city) {
      try {
        city.cityBuildings.firstWhere((element) => element is Church);
        return true;
      } catch (e) {
        return false;
      }
    }
  ];
```

–Ø–∫—â–æ –æ—Å—ñ–Ω—å, –ø–æ–ø—É–ª—è—Ä–Ω—ñ—Å—Ç—å —Å–µ–ª–∏—â–∞ –±—ñ–ª—å—à–∞ –∑–∞ 20, —è–∫—â–æ –ø–æ–±—É–¥–æ–≤–∞–Ω–∞ —Ü–µ—Ä–∫–≤–∞, —Ç–æ –¥–æ –≤–∞—Å –ø—Ä–∏–π–¥—É—Ç—å ( –∑ —è–∫–æ—é—Å—å –≤–∏–ø–∞–¥–∫–æ–≤–æ—é –≤—ñ—Ä–æ–≥—ñ–¥–Ω—ñ—Å—Ç—é) –Ω–æ–≤—ñ –ª—é–¥–∏.

# –í–∏–ø–∞–¥–∫–æ–≤—ñ –ø–æ–¥—ñ—ó, —è–∫—ñ –≤–∏–º–∞–≥–∞—é—Ç—å –≤–∏–±–æ—Ä—É –≥—Ä–∞–≤—Ü—è
–†–æ–∑—ñ–±—Ä–∞–ª–∏—Å—è –∑ –ø—Ä–æ—Å—Ç–æ –≤–∏–ø–∞–¥–∫–æ–≤–∏–º–∏ –ø–æ–¥—ñ—è–º–∏, —Ç–µ–ø–µ—Ä —Ä–µ–∞–ª—ñ–∑—É—î–º–æ –ø–æ–¥—ñ—ó, —è–∫—ñ –≤–∏–º–∞–≥–∞—é—Ç—å –≤–∏–±–æ—Ä—É –≥—Ä–∞–≤—Ü—è —ñ –≤—Å—Ç—É–ø–∞—é—Ç—å –≤ —Å–∏–ª—É –Ω–∞ –Ω–∞—Å—Ç—É–ø–Ω–∏–π —Ö—ñ–¥ –≥—Ä–∏ (—Å–µ–∑–æ–Ω).

–í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—á–∏ –º—ñ—Ü—å –û–û–ü, –º–∏ –º–æ–∂–µ–º–æ –ø–µ—Ä–µ–≤–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ –≤–µ—Å—å –∫–ª–∞—Å RandomTurnEvent, —ñ –¥–æ–¥–∞—Ç–∏ –ª–∏—à–µ –º–µ—Ç–æ–¥–∏ —ñ –≤–ª–∞—Å—Ç–∏–≤–æ—Å—Ç—ñ, —è–∫—ñ —Å—Ç–æ—Å—É—é—Ç—å—Å—è –≤–∏–±–æ—Ä—É.

–ù–æ–≤–∏—Ö –≤–ª–∞—Å—Ç–∏–≤–æ—Å—Ç–µ–π –ª–∏—à–µ —Ç—Ä–∏:

```dart
abstract class ChoicableRandomTurnEvent extends RandomTurnEvent {
  String localizedQuestionKey;
  String localizedKeyYes;
  String localizedKeyNo;

```

–í–æ–Ω–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å—Å—è –¥–ª—è –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å –≥—Ä–∞–≤—Ü—é –Ω–∞ –µ–∫—Ä–∞–Ω—ñ: –∑–∞–ø–∏—Ç–∞–Ω–Ω—è, —Ç–µ–∫—Å—Ç —É —Ä–∞–∑—ñ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ –¢–∞–∫ –∞–±–æ –ù—ñ.

–û—Å–æ–±–ª–∏–≤—ñ—Å—Ç—å –ø–æ–∫—Ä–æ–∫–æ–≤–∏—Ö —ñ–≥–æ—Ä –≤ —Ç–æ–º—É, —â–æ –¥—ñ—è –≥—Ä–∞–≤—Ü—è –Ω–∞ –ø–æ—Ç–æ—á–Ω–æ–º—É —Ö–æ–¥—ñ –Ω–∞—Å–ø—Ä–∞–≤–¥—ñ –≤–∏–∫–æ–Ω—É—î—Ç—å—Å—è –ª–∏—à–µ –Ω–∞ –Ω–∞—Å—Ç—É–ø–Ω–æ–º—É. –ù–∞–ø—Ä–∏–∫–ª–∞–¥: –≤–∏ –Ω–∞–¥—ñ—Å–ª–∞–ª–∏ –≤—ñ–π—Å—å–∫–æ –≤ –ø–æ—Ö—ñ–¥. –†–µ–∑—É–ª—å—Ç–∞—Ç –ø–æ—Ö–æ–¥—É –≤–∏ –æ–¥—Ä–∞–∑—É –Ω–µ –∑–Ω–∞—î—Ç–µ (–ø–æ–∫–∏ –¥—ñ–π–¥—É—Ç—å –≤—ñ–π—Å—å–∫–∞ —ñ —Ç–¥), —Ç–æ–º—É –π–æ–≥–æ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –º–∞—î –ø–µ—Ä–µ–¥–∞—Ç–∏—Å—è –Ω–∞ –Ω–∞—Å—Ç—É–ø–Ω–∏–π —Ö—ñ–¥.

–î–ª—è —Ü—å–æ–≥–æ –º–∏ –¥–æ–¥–∞–º–æ –Ω–æ–≤–∏–π –º–µ—Ç–æ–¥ postExecute. –í—ñ–Ω —è–∫—Ä–∞–∑ —ñ –±—É–¥–µ –∑–≤'—è–∑—É—é—á–æ—é –ª–∞–Ω–∫—É—é –º—ñ–∂ —Ö–æ–¥–∞–º–∏:

```dart
 Function postExecute(Sloboda city) {
    var r = Random().nextInt(100);
    return () {
      bool success = r <= successRate;
      return EventMessage(
          event: this,
          stock: success ? stockSuccess : stockFailure,
          cityProps: success ? cityPropsSuccess : cityPropsFailure,
          messageKey:
              success ? this.successMessageKey : this.failureMessageKey);
    };
  }
```

–ú–µ—Ç–æ–¥ –ø–æ–≤–µ—Ä—Ç–∞—î —â–µ –æ–¥–Ω—É —Ñ—É–Ω–∫—Ü—ñ—é, —è–∫–∞ –±—É–¥–µ –≤–∏–∫–æ–Ω–∞–Ω–∞ –ø—ñ–¥ —á–∞—Å –Ω–∞—Å—Ç–∞–Ω–Ω—è –Ω–∞—Å—Ç—É–ø–Ω–æ–≥–æ —Ö–æ–¥—É.

–ì—Ä–∞–≤–µ—Ü—å –∂–µ, –≤—ñ—Ä–Ω—ñ—à–µ –≤—ñ–¥–∂–µ—Ç –ø–æ–¥—ñ–π, –ø—Ä–∞—Ü—é—î –∑ –Ω–∞—Å—Ç—É–ø–Ω–∏–º –º–µ—Ç–æ–¥–æ–º:

```dart
  Function makeChoice(bool yes, Sloboda city) {
    if (yes) {
      return this.postExecute(city);
    } else {
      return () {};
    }
  }
```

–í—ñ–Ω –Ω–∞–ø—Ä—è–º—É –≤–∏–∫–ª–∏–∫–∞—î—Ç—å—Å—è –∑ –æ–±—Ä–æ–±—á–∏–∫–∞ –¥—ñ–∞–ª–æ–≥—É. –Ø–∫—â–æ –≥—Ä–∞–≤–µ—Ü—å –ø–æ–≥–æ–¥–∏–≤—Å—è –≤–∑—è—Ç–∏ —É—á–∞—Å—Ç—å –≤ –ø–æ–¥—ñ—ó, —Ç–æ –≤ —á–µ—Ä–≥—É –ø–æ–¥—ñ–π –¥–æ–¥–∞—î—Ç—å—Å—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤–∏–∫–æ–Ω–∞–Ω–Ω—è this.postExecute(city). –¶–µ–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç —è–≤–ª—è—î —Å–æ–±–æ—é –ø–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ —ñ–Ω—à—É —Ñ—É–Ω–∫—Ü—ñ—é, —è–∫–∞ —â–µ –Ω–µ –≤–∏–∫–æ–Ω–∞–Ω–∞. 

–í –∫–ª–∞—Å—ñ Sloboda, —â–æ —è–≤–ª—è—î —Å–æ–±–æ—é –æ–±—Ä–æ–±—á–∏–∫ –≤—Å—ñ—Ö –ø–æ–¥—ñ–π —ñ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î –∑–∞ —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è —Ä–µ—Å—É—Ä—Å–∞–º–∏, –ª—é–¥—å–º–∏, –ø–æ–¥—ñ—è–º–∏, —î —Å–ø–∏—Å–æ–∫ –∑–∞—Ä–µ—î—Å—Ç—Ä–æ–≤–∞–Ω–∏—Ö –ø–æ–¥—ñ–π:

- –û–±—Ä–æ–±—á–∏–∫ –≤–∏–±–æ—Ä—É –≥—Ä–∞–≤—Ü—è
```dart
  void runChoicableEventResult(ChoicableRandomTurnEvent event) {
    Function f = event.makeChoice(true, this);
    _nextRandomEvents.add(f);
  }
```

- –ü—ñ–¥ —á–∞—Å –æ–±—Ä–æ–±–∫–∏ –Ω–∞—Å—Ç—É–ø–Ω–æ–≥–æ —Ö–æ–¥—É, –≤–∏–∫–æ–Ω—É—î—Ç—å—Å—è –º–µ—Ç–æ–¥, —è–∫–∏–π —ñ—Ç–µ—Ä—É—î –ø–æ –≤—Å—ñ—Ö –∑–∞—Ä–µ—î—Å—Ç—Ä–æ–≤–∞–Ω–∏—Ö –ø–æ–¥—ñ—è—Ö —ñ –≤–∏–∫–æ–Ω—É—î —ó—Ö:

```dart
 void _runAttachedEvents() {
    for (var _event in _nextRandomEvents) {
      EventMessage event = _event(); // —Ü–µ —É–∂–µ –±–µ–∑–ø–æ—Å–µ—Ä–µ–¥–Ω—å–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –≤–∫–ª–∞–¥–µ–Ω–æ—ó –≤ postExecute —Ñ—É–Ω–∫—Ü—ñ—ó
      this.stock + event.stock;
      this.addProps(event.cityProps);
    ....
```

## –ü—Ä–∏–∫–ª–∞–¥ –ø–æ–¥—ñ—ó –∑ –≤–∏–±–æ—Ä–æ–º

```dart
class BuyPrisoners extends ChoicableRandomTurnEvent {
  String successMessageKey = 'randomTurnEvent.successBuyPrisoners';
  String failureMessageKey = 'randomTurnEvent.failureBuyPrisoners';
  String localizedKeyYes = 'randomTurnEvent.BuyPrisonersYes';
  String localizedKeyNo = 'randomTurnEvent.BuyPrisonersNo';

  int probability = 100;

  Stock stockSuccess = Stock(values: {
    RESOURCE_TYPES.MONEY: -40,
  });

  Stock stockFailure = Stock(values: {
    RESOURCE_TYPES.MONEY: 20,
  });

  CityProps cityPropsFailure = CityProps(
    values: {
      CITY_PROPERTIES.GLORY: 10,
      CITY_PROPERTIES.CITIZENS: 15,
      CITY_PROPERTIES.FAITH: 10,
    },
  );
  CityProps cityPropsSuccess = CityProps(
    values: {
      CITY_PROPERTIES.CITIZENS: 5,
    },
  );

  int successRate = 30;

  String localizedKey = 'randomTurnEvent.BuyPrisoners';
  String localizedQuestionKey = 'randomTurnEvent.BuyPrisonersQuestion';

  List<Function> conditions = [
    (Sloboda city) {
      return city.currentSeason is AutumnSeason;
    },
    (Sloboda city) {
      return city.stock.getByType(RESOURCE_TYPES.MONEY) > 40;
    },
    (Sloboda city) {
      return ChoicableRandomTurnEvent.onceInYears<BuyPrisoners>(city, 3);
    }
  ];
}
```


# –ó–∞–ø—É—Å–∫ –ø–æ–¥—ñ–π

–ö–ª–∞—Å Sloboda, —è–∫–∏–π –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î –∑–∞ —Ä–æ–±–æ—Ç—É –≤—Å—å–æ–≥–æ —Å–µ–ª–∏—â–∞, –º–∞—î —á–µ—Ä–≥—É –Ω–∞—Å—Ç—É–ø–Ω–∏—Ö –ø–æ–¥—ñ–π:

```dart
  final Queue<RandomTurnEvent> pendingNextEvents = Queue();
```

–ü—ñ–¥ —á–∞—Å –∫–æ–∂–Ω–æ–≥–æ —Ö–æ–¥—É, Sloboda –æ–ø–∏—Ç—É—î –≤—Å—ñ –ø–æ–¥—ñ—ó —ñ–∑ —Å–ø–∏—Å–∫—É —ñ –±–µ—Ä–µ –ø–µ—Ä—à—ñ 3 –∑ –Ω–∏—Ö, —è–∫—ñ –º–æ–∂—É—Ç—å –±—É—Ç–∏ –∞–∫—Ç–∏–≤–Ω–∏–º–∏ –Ω–∞ –¥–∞–Ω–æ–º—É —Ö–æ–¥—É:

```dart
  _queueNextEvents() {
    List<RandomTurnEvent> choicableEvents =
        getChoicableRandomEvents().take(3).toList();
    pendingNextEvents.addAll(choicableEvents);
  }
```

–¶—è —á–µ—Ä–≥–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è —É –≤—ñ–¥–∂–µ—Ç—ñ, —è–∫–∏–π –ø–æ–∫–∞–∑—É—î –¥–æ—Å—Ç—É–ø–Ω—ñ –ø–æ–¥—ñ—ó –æ–¥–∏–Ω –∑–∞ –æ–¥–Ω–∏–º:

```dart
 Widget build(BuildContext context) {
    final city = InheritedCity.of(context).city;
    final Queue<RandomTurnEvent> pendingEvents = city.pendingNextEvents;
    return Column(
      children: <Widget>[
        if (pendingEvents.isNotEmpty)
          Expanded(
            flex: 3,
            child: PendingEventsView(
              events: pendingEvents,
            ),
          ),
```

–ö–æ–ª–∏ –≥—Ä–∞–≤–µ—Ü—å —Ä–æ–±–∏—Ç—å —Å–≤—ñ–π –≤–∏–±—ñ—Ä, —Ç–æ –∑ —á–µ—Ä–≥–∏ –≤–∏–¥–∞–ª—è—î—Ç—å—Å—è –µ–∫–∑–µ–º–ø–ª—è—Ä —Ü—ñ—î—ó –ø–æ–¥—ñ—ó —ñ –¥–æ–¥–∞—î—Ç—å—Å—è –≤ –∂—É—Ä–Ω–∞–ª —Å–µ–ª–∏—â–∞ –∑–∞–ø–∏—Å –∑ –≤–∏–±–æ—Ä–æ–º –≥—Ä–∞–≤—Ü—è:

```dart
  void addChoicableEventWithAnswer(bool yes, ChoicableRandomTurnEvent event) {
    events.add(
      CityEvent(
        season: currentSeason.previous,
        yearHappened:
            currentSeason is WinterSeason ? currentYear - 1 : currentYear,
        sourceEvent: EventMessage(
          stock: null,
          event: event,
          messageKey: event.choiceToStringKey(yes),
        ),
      ),
    );

    if (yes) {
      runChoicableEventResult(event);
    }

    pendingNextEvents.remove(event);

    _innerChanges.add(this);
  }
```

### –†–µ—î—Å—Ç—Ä –≤—Å—ñ—Ö –ø–æ–¥—ñ–π
–ù–∞–∂–∞–ª—å, –≤ Dart –Ω–µ–º–∞—î –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ –æ—Ç—Ä–∏–º–∞—Ç–∏ –≤—Å—ñ –ø—ñ–¥ –∫–ª–∞—Å–∏ —è–∫–æ–≥–æ—Å—å –∫–ª–∞—Å—É, —è–∫ —Ü–µ –∑—Ä–æ–±–ª–µ–º–Ω–æ –≤ Smalltalk. –¢–æ–º—É –∫–æ–∂–µ–Ω –Ω–æ–≤–∏–π –∫–ª–∞—Å –ø–æ–¥—ñ–π –Ω–µ–æ–±—Ö—ñ–¥–Ω–æ –¥–æ–¥–∞—Ç–∏ –≤ —Å—Ç–∞—Ç–∏—á–Ω–∏–π —Å–ø–∏—Å–æ–∫:

```dart
static List<RandomTurnEvent> allEvents = [
    KoshoviyPohid(),
    TartarsRaid(),
    SaranaInvasion(),
    ChildrenPopulation(),
    SteppeFire(),
    RunnersFromSuppression(),
    SettlersArrived(),
    GuestsFromSich(),
    ChambulCapture(),
    MerchantVisit(),
    UniteWithNeighbours(),
    HelpNeighbours(),
    BuyPrisoners(),
    AttackChambul(),
    TrapChambulOnWayBack(),
    HelpDefendSich(),
    SendMoneyToSchoolInKaniv(),
    SendMerchantToKanev(),
    AttackCatholicChurches(),
    HelpDefendAgainstCatholicRaiders(),
  ];
```

# –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü—ñ—è:

![demo_events.gif](https://cdn.hashnode.com/res/hashnode/image/upload/v1585144547194/mvBvzne1X.gif)

# UML —Å—Ö–µ–º–∞ –≤—Å—ñ—Ö –ø–æ–¥—ñ–π

![events_uml.png](https://cdn.hashnode.com/res/hashnode/image/upload/v1585144930549/zJZ6nq45j.png)

# –ó–∞–∫–ª—é—á–µ–Ω–Ω—è

–†–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–∏–π –º–µ—Ö–∞–Ω—ñ–∑–º –ø–æ–¥—ñ–π –≤–∏—è–≤–∏–≤—Å—è –¥–æ–≤–æ–ª—ñ –≥—Ä—É—á–∫–∏–º. –ö–æ–∂–Ω–∞ –∑ –ø–æ–¥—ñ–π –º–æ–∂–µ –∑–∞–¥–∞–≤–∞—Ç–∏ —Å–≤–æ—ó –Ω–µ–æ–±—Ö—ñ–¥–Ω—ñ —É–º–æ–≤–∏, –∫–∞—Å—Ç–æ–º—ñ–∑—É–≤–∞—Ç–∏ —ó—Ö –ø—ñ–¥ —Å–≤–æ—ó –ø–æ—Ç—Ä–µ–±–∏. –ù–∞–ø—Ä–∏–∫–ª–∞–¥, –ø–æ–¥—ñ—è "–í—ñ–¥–≤—ñ–¥—É–≤–∞–Ω–Ω—è –∫—É–ø—Ü—è", –º–∞—î —Å–≤–æ—é –≤–ª–∞—Å–Ω—É postExecute —ñ–º–ø–ª–µ–º–µ–Ω—Ç–∞—Ü—ñ—é, —Ç–∞–∫ —è–∫ —ó–π —Ç—Ä–µ–±–∞ –≤–∏–∑–Ω–∞—á–∏—Ç–∏ –Ω–∞—è–≤–Ω—ñ—Å—Ç—å —Ç–æ–≤–∞—Ä—É —ñ –ø—Ä–æ–≤–µ—Å—Ç–∏ –∫–∞–ª—å–∫—É–ª—è—Ü—ñ—é –≤–∏–Ω–∞–≥–æ—Ä–æ–¥–∏.

```dart
Function postExecute(Sloboda city) {
    var r = Random().nextInt(100);
    return () {
      bool success = r <= successRate;
      var furTotal = city.stock.getByType(RESOURCE_TYPES.FUR);
      var fishTotal = city.stock.getByType(RESOURCE_TYPES.FISH);
      var stock = Stock(values: {
        RESOURCE_TYPES.FUR: -furTotal,
        RESOURCE_TYPES.FISH: -fishTotal,
      });

      if (success) {
        stock.addToType(RESOURCE_TYPES.MONEY, (furTotal + fishTotal) * 2);
      }
      return EventMessage(
          event: this,
          stock: stock,
          cityProps: null,
          messageKey:
              success ? this.successMessageKey : this.failureMessageKey);
    };
  }
```

–Ü —â–æ —Å–∞–º–µ –≥–æ–ª–æ–≤–Ω–µ, –∑ —Ç–æ—á–∫–∏ –∑–æ—Ä—É Flutter Widget, –Ω–µ–º–∞—î –Ω—ñ—è–∫–æ—ó —Ä—ñ–∑–Ω–∏—Ü—ñ, —è–∫–∏–π —Ç–∏–ø –ø–æ–¥—ñ–π –≤—ñ–¥–æ–±—Ä–∞–∑–∏—Ç–∏ –≥—Ä–∞–≤—Ü—é:

```dart
// —Ç—É—Ç –¥–µ—Å—å Column –≤–∏—â–µ
 ..._events[key].reversed.map((event) {
                            var textStyle;
                            if (city.currentSeason.isNextTo(event.season)) {
                              textStyle = Theme.of(context).textTheme.headline6;
                            }
                            return Padding(
                                padding: const EdgeInsets.all(8.0),
                                child: SoftContainer(
                                  child: Column(
                                    children: <Widget>[
                                      if (event.sourceEvent.imagePath != null)
                                        Image.asset(
                                          event.sourceEvent.imagePath,
                                          width: 64,
                                        ),
                                      FullWidth(
                                        child: Text(
                                          SlobodaLocalizations.getForKey(
                                              event.sourceEvent.messageKey),
                                          textAlign: TextAlign.center,
                                          style: textStyle,
                                        ),
                                      ),
                                      if (event.sourceEvent.stock != null)
                                        StockMiniView(
                                          stock: event.sourceEvent.stock,
                                          stockSimulation: null,
                                        ),
                                      if (event.sourceEvent.cityProps != null)
                                        CityPropsMiniView(
                                          props: event.sourceEvent.cityProps,
                                        ),
                                    ],
                                  ),
                                ));
                          }).toList()
```

# –¢–æ –∂, –≥—Ä–∞–π—Ç–µ –≤ –°–ª–æ–±–æ–¥—É https://locadeserta.com/ —Ç–∞ —á–∏—Ç–∞–π—Ç–µ —ñ–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ñ —ñ—Å—Ç–æ—Ä—ñ—ó!

–ó–±—ñ—Ä–∫–∏ –ø—ñ–¥ –¥–µ—Å–∫—Ç–æ–ø –ø–ª–∞—Ç—Ñ–æ—Ä–º–∏ —Ç–∞ –∞–Ω–¥—Ä–æ—ñ–¥: https://github.com/gladimdim/sloboda/releases